

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>基础 API &mdash; rqalpha 2.0.x documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="rqalpha 2.0.x documentation" href="../index.html"/>
        <link rel="next" title="扩展 API" href="extend_api.html"/>
        <link rel="prev" title="参数配置" href="config.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> rqalpha
          

          
          </a>

          
            
            
              <div class="version">
                2.0.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">快速指引</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html">RQAlpha 介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/detail_install.html">详细环境搭建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial.html">10分钟学会 RQAlpha</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/examples.html">策略示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/virtual_machine.html">RQAlpha开箱即用虚拟机</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="config.html">参数配置</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">基础 API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">基本方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">init</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handle-bar">handle_bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#before-trading">before_trading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#after-trading">after_trading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-rqalpha.api">交易相关函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#order-shares">order_shares - 指定股数交易（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-lots">order_lots - 指定手数交易（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-value">order_value - 指定价值交易（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-percent">order_percent - 一定比例下单（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-target-value">order_target_value - 目标价值下单（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-target-percent">order_target_percent - 目标比例下单（股票专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buy-open">buy_open - 买开（期货专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sell-close">sell_close - 平买仓（期货专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sell-open">sell_open - 卖开（期货专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buy-close">buy_close - 平卖仓（期货专用）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-order">cancel_order - 撤单</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-open-orders">get_open_orders - 获取未成交订单数据</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scheduler">scheduler定时器</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-daily">scheduler.run_daily - 每天运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-weekly">scheduler.run_weekly - 每周运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-monthly">scheduler.run_monthly - 每月运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-rule">time_rule - 定时间运行</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">数据查询相关函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#all-instruments">all_instruments - 所有合约基础信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instruments">instruments - 合约详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="#industry">industry - 行业股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sector">sector - 板块股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concept">concept - 概念股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#history-bars">history_bars - 某一合约历史数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-snapshot">current_snapshot - 当前快照数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-future-contracts">get_future_contracts - 期货可交易合约列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-trading-dates">get_trading_dates - 交易日列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-previous-trading-date">get_previous_trading_date - 上一交易日</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-next-trading-date">get_next_trading_date - 下一交易日</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-yield-curve">get_yield_curve - 收益率曲线</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-suspended">is_suspended - 全天停牌判断</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-st-stock-st">is_st_stock - ST股判断</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">其他方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update-universe">update_universe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unsubscribe">unsubscribe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-rqalpha.core.strategy_context">Context属性</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">类</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.bar">Bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.snapshot">Snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.order">Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.portfolio">Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.account.stock_account">StockAccount</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.account.future_account">FutureAccount</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.position.stock_position">StockPosition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model.position.future_position">FuturePosition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rqalpha.model">Instrument</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id7">枚举常量</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#order-status">ORDER_STATUS - 订单状态</a></li>
<li class="toctree-l3"><a class="reference internal" href="#side">SIDE - 买卖方向</a></li>
<li class="toctree-l3"><a class="reference internal" href="#position-effect">POSITION_EFFECT - 开平</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-type">ORDER_TYPE - 订单类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-type">RUN_TYPE - 策略运行类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matching-type">MATCHING_TYPE - 撮合方式</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extend_api.html">扩展 API</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/make_contribute.html">如何贡献代码</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/basic_concept.html">基本概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/mod.html">RQAlpha 扩展 - Mod</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/event_source.html">扩展事件源</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/data_source.html">扩展数据源</a></li>
</ul>
<p class="caption"><span class="caption-text">Extra</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">TODO</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">rqalpha</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>基础 API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/base_api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<span id="api-base-api"></span><h1>基础 API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>基本方法<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="init">
<h3>init<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">init</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>【必须实现】</p>
<p>初始化方法 - 在回测和实时模拟交易只会在启动的时候触发一次。你的算法会使用这个方法来设置你需要的各种初始化配置。 context 对象将会在你的算法的所有其他的方法之间进行传递以方便你可以拿取到。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) &#8211; 策略上下文</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1"># cash_limit的属性是根据用户需求自己定义的，你可以定义无限多种自己随后需要的属性，ricequant的系统默认只是会占用context.portfolio的关键字来调用策略的投资组合信息</span>
    <span class="n">context</span><span class="o">.</span><span class="n">cash_limit</span> <span class="o">=</span> <span class="mi">5000</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="handle-bar">
<h3>handle_bar<a class="headerlink" href="#handle-bar" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="handle_bar">
<code class="descname">handle_bar</code><span class="sig-paren">(</span><em>context</em>, <em>bar_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#handle_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>【必须实现】</p>
<p>bar数据的更新会自动触发该方法的调用。策略具体逻辑可在该方法内实现，包括交易信号的产生、订单的创建等。在实时模拟交易中，该函数在交易时间内会每分钟被触发一次。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) &#8211; 策略上下文</li>
<li><strong>bar_dict</strong> (<code class="xref py py-class docutils literal"><span class="pre">BarDict</span></code> object) &#8211; key为order_book_id，value为bar数据。当前合约池内所有合约的bar数据信息都会更新在bar_dict里面</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">handle_bar</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="c1"># put all your algorithm main logic here.</span>
    <span class="c1"># ...</span>
    <span class="n">order_shares</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="before-trading">
<h3>before_trading<a class="headerlink" href="#before-trading" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="before_trading">
<code class="descname">before_trading</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#before_trading" title="Permalink to this definition">¶</a></dt>
<dd><p>【选择实现】</p>
<p>每天在策略开始交易前会被调用。不能在这个函数中发送订单。需要注意，该函数的触发时间取决于用户当前所订阅合约的交易时间。</p>
<p>举例来说，如果用户订阅的合约中存在有夜盘交易的期货合约，则该函数可能会在前一日的20:00触发，而不是早晨08:00.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) &#8211; 策略上下文</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">before_trading</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is before trading&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="after-trading">
<h3>after_trading<a class="headerlink" href="#after-trading" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="after_trading">
<code class="descname">after_trading</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#after_trading" title="Permalink to this definition">¶</a></dt>
<dd><p>【选择实现】</p>
<p>每天在收盘后被调用。不能在这个函数中发送订单。您可以在该函数中进行当日收盘后的一些计算。</p>
<p>在实时模拟交易中，该函数会在每天15:30触发。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) &#8211; 策略上下文</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-rqalpha.api">
<span id="id2"></span><h2>交易相关函数<a class="headerlink" href="#module-rqalpha.api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="order-shares">
<h3>order_shares - 指定股数交易（股票专用）<a class="headerlink" href="#order-shares" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_shares">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_shares</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_shares" title="Permalink to this definition">¶</a></dt>
<dd><p>落指定股数的买/卖单，最常见的落单方式之一。如有需要落单类型当做一个参量传入，如果忽略掉落单类型，那么默认是市价单（market order）。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite>) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单量, 正数代表买入，负数代表卖出。将会根据一手xx股来向下调整到一手的倍数，比如中国A股就是调整成100股的倍数。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#购买Buy 2000 股的平安银行股票，并以市价单发送：</span>
<span class="n">order_shares</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
<span class="c1">#卖出2000股的平安银行股票，并以市价单发送：</span>
<span class="n">order_shares</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2000</span><span class="p">)</span>
<span class="c1">#购买1000股的平安银行股票，并以限价单发送，价格为￥10：</span>
<span class="n">order_shares</span><span class="p">(</span><span class="s1">&#39;000001.XSHG&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LimitOrder</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="order-lots">
<h3>order_lots - 指定手数交易（股票专用）<a class="headerlink" href="#order-lots" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_lots">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_lots</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_lots" title="Permalink to this definition">¶</a></dt>
<dd><p>指定手数发送买/卖单。如有需要落单类型当做一个参量传入，如果忽略掉落单类型，那么默认是市价单（market order）。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite>) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单量, 正数代表买入，负数代表卖出。将会根据一手xx股来向下调整到一手的倍数，比如中国A股就是调整成100股的倍数。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#买入20手的平安银行股票，并且发送市价单：</span>
<span class="n">order_lots</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="c1">#买入10手平安银行股票，并且发送限价单，价格为￥10：</span>
<span class="n">order_lots</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LimitOrder</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="order-value">
<h3>order_value - 指定价值交易（股票专用）<a class="headerlink" href="#order-value" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_value">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_value</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_value" title="Permalink to this definition">¶</a></dt>
<dd><p>使用想要花费的金钱买入/卖出股票，而不是买入/卖出想要的股数，正数代表买入，负数代表卖出。股票的股数总是会被调整成对应的100的倍数（在A中国A股市场1手是100股）。当您提交一个卖单时，该方法代表的意义是您希望通过卖出该股票套现的金额。如果金额超出了您所持有股票的价值，那么您将卖出所有股票。需要注意，如果资金不足，该API将不会创建发送订单。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite>) &#8211; 下单标的物</li>
<li><strong>cash_amount</strong> (<em>float</em>) &#8211; 需要花费现金购买/卖出证券的数目。正数代表买入，负数代表卖出。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#买入价值￥10000的平安银行股票，并以市价单发送。如果现在平安银行股票的价格是￥7.5，那么下面的代码会买入1300股的平安银行，因为少于100股的数目将会被自动删除掉：</span>
<span class="n">order_value</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="c1">#卖出价值￥10000的现在持有的平安银行：</span>
<span class="n">order_value</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="order-percent">
<h3>order_percent - 一定比例下单（股票专用）<a class="headerlink" href="#order-percent" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_percent">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_percent</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>发送一个等于目前投资组合价值（市场价值和目前现金的总和）一定百分比的买/卖单，正数代表买，负数代表卖。股票的股数总是会被调整成对应的一手的股票数的倍数（1手是100股）。百分比是一个小数，并且小于或等于1（&lt;=100%），0.5表示的是50%.需要注意，如果资金不足，该API将不会创建发送订单。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite>) &#8211; 下单标的物</li>
<li><strong>percent</strong> (<em>float</em>) &#8211; 占有现有的投资组合价值的百分比。正数表示买入，负数表示卖出。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#买入等于现有投资组合50%价值的平安银行股票。如果现在平安银行的股价是￥10/股并且现在的投资组合总价值是￥2000，那么将会买入200股的平安银行股票。（不包含交易成本和滑点的损失）：</span>
<span class="n">order_percent</span><span class="p">(</span><span class="s1">&#39;000001.XSHG&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="order-target-value">
<h3>order_target_value - 目标价值下单（股票专用）<a class="headerlink" href="#order-target-value" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_target_value">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_target_value</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_target_value" title="Permalink to this definition">¶</a></dt>
<dd><p>买入/卖出并且自动调整该证券的仓位到一个目标价值。如果还没有任何该证券的仓位，那么会买入全部目标价值的证券。如果已经有了该证券的仓位，则会买入/卖出调整该证券的现在仓位和目标仓位的价值差值的数目的证券。需要注意，如果资金不足，该API将不会创建发送订单。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>cash_amount</strong> (<em>float</em>) &#8211; 最终的该证券的仓位目标价值。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#如果现在的投资组合中持有价值￥3000的平安银行股票的仓位并且设置其目标价值为￥10000，以下代码范例会发送价值￥7000的平安银行的买单到市场。（向下调整到最接近每手股数即100的倍数的股数）：</span>
<span class="n">order_target_value</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="order-target-percent">
<h3>order_target_percent - 目标比例下单（股票专用）<a class="headerlink" href="#order-target-percent" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.order_target_percent">
<code class="descclassname">rqalpha.api.</code><code class="descname">order_target_percent</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.order_target_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>买入/卖出证券以自动调整该证券的仓位到占有一个指定的投资组合的目标百分比。</p>
<ul class="simple">
<li>如果投资组合中没有任何该证券的仓位，那么会买入等于现在投资组合总价值的目标百分比的数目的证券。</li>
<li>如果投资组合中已经拥有该证券的仓位，那么会买入/卖出目标百分比和现有百分比的差额数目的证券，最终调整该证券的仓位占据投资组合的比例至目标百分比。</li>
</ul>
<p>其实我们需要计算一个position_to_adjust (即应该调整的仓位)</p>
<p><cite>position_to_adjust = target_position - current_position</cite></p>
<p>投资组合价值等于所有已有仓位的价值和剩余现金的总和。买/卖单会被下舍入一手股数（A股是100的倍数）的倍数。目标百分比应该是一个小数，并且最大值应该&lt;=1，比如0.5表示50%。</p>
<p>如果position_to_adjust 计算之后是正的，那么会买入该证券，否则会卖出该证券。 需要注意，如果资金不足，该API将不会创建发送订单。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>percent</strong> (<em>float</em>) &#8211; 仓位最终所占投资组合总价值的目标百分比。</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#如果投资组合中已经有了平安银行股票的仓位，并且占据目前投资组合的10%的价值，那么以下代码会买入平安银行股票最终使其占据投资组合价值的15%：</span>
<span class="n">order_target_percent</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="buy-open">
<h3>buy_open - 买开（期货专用）<a class="headerlink" href="#buy-open" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.buy_open">
<code class="descclassname">rqalpha.api.</code><code class="descname">buy_open</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.buy_open" title="Permalink to this definition">¶</a></dt>
<dd><p>买入开仓。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单手数</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#以价格为3500的限价单开仓买入2张上期所AG1607合约：</span>
<span class="n">buy_open</span><span class="p">(</span><span class="s1">&#39;AG1607&#39;</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LimitOrder</span><span class="p">(</span><span class="mi">3500</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="sell-close">
<h3>sell_close - 平买仓（期货专用）<a class="headerlink" href="#sell-close" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.sell_close">
<code class="descclassname">rqalpha.api.</code><code class="descname">sell_close</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.sell_close" title="Permalink to this definition">¶</a></dt>
<dd><p>平买仓</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单手数</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sell-open">
<h3>sell_open - 卖开（期货专用）<a class="headerlink" href="#sell-open" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.sell_open">
<code class="descclassname">rqalpha.api.</code><code class="descname">sell_open</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.sell_open" title="Permalink to this definition">¶</a></dt>
<dd><p>卖出开仓</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单手数</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="buy-close">
<h3>buy_close - 平卖仓（期货专用）<a class="headerlink" href="#buy-close" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.buy_close">
<code class="descclassname">rqalpha.api.</code><code class="descname">buy_close</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.buy_close" title="Permalink to this definition">¶</a></dt>
<dd><p>平卖仓</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 下单标的物</li>
<li><strong>amount</strong> (<em>int</em>) &#8211; 下单手数</li>
<li><strong>style</strong> (<cite>OrderStyle</cite> object) &#8211; 下单类型, 默认是市价单。目前支持的订单类型有 <code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code> 和 <code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#市价单将现有IF1603空仓买入平仓2张：</span>
<span class="n">buy_close</span><span class="p">(</span><span class="s1">&#39;IF1603&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="cancel-order">
<h3>cancel_order - 撤单<a class="headerlink" href="#cancel-order" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.cancel_order">
<code class="descclassname">rqalpha.api.</code><code class="descname">cancel_order</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.cancel_order" title="Permalink to this definition">¶</a></dt>
<dd><p>撤单</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order</strong> (<code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object) &#8211; 需要撤销的order对象</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-open-orders">
<h3>get_open_orders - 获取未成交订单数据<a class="headerlink" href="#get-open-orders" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_open_orders">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_open_orders</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_open_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>获取当日未成交订单数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List[<code class="xref py py-class docutils literal"><span class="pre">Order</span></code> object]</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="scheduler">
<h2>scheduler定时器<a class="headerlink" href="#scheduler" title="Permalink to this headline">¶</a></h2>
<div class="section" id="scheduler-run-daily">
<h3>scheduler.run_daily - 每天运行<a class="headerlink" href="#scheduler-run-daily" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.scheduler.run_daily">
<code class="descclassname">scheduler.</code><code class="descname">run_daily</code><span class="sig-paren">(</span><em>function</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.scheduler.run_daily" title="Permalink to this definition">¶</a></dt>
<dd><p>每日运行一次指定的函数，只能在init内使用。</p>
<p>注意，schedule一定在其对应时间点的handle_bar之后执行。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>function</strong> (<em>func</em>) &#8211; 使传入的function每日运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的范例代码片段是一个非常简单的例子，在每天交易后查询现在portfolio中剩下的cash的情况:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个输入参数</span>
<span class="k">def</span> <span class="nf">log_cash</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Remaning cash: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">context</span><span class="o">.</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="c1"># 每天运行一次</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">log_cash</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="scheduler-run-weekly">
<h3>scheduler.run_weekly - 每周运行<a class="headerlink" href="#scheduler-run-weekly" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.scheduler.run_weekly">
<code class="descclassname">scheduler.</code><code class="descname">run_weekly</code><span class="sig-paren">(</span><em>function</em>, <em>weekday=x</em>, <em>tradingday=t</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.scheduler.run_weekly" title="Permalink to this definition">¶</a></dt>
<dd><p>每周运行一次指定的函数，只能在init内使用。</p>
<p>注意：</p>
<ul class="simple">
<li>tradingday中的负数表示倒数。</li>
<li>tradingday表示交易日。如某周只有四个交易日，则此周的tradingday=4与tradingday=-1表示同一天。</li>
<li>weekday和tradingday不能同时使用。</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>func</em>) &#8211; 使传入的function每日交易开始前运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数。</li>
<li><strong>weekday</strong> (<em>int</em>) &#8211; 1~5 分别代表周一至周五，用户必须指定</li>
<li><strong>tradingday</strong> (<em>int</em>) &#8211; 范围为[-5,1],[1,5] 例如，1代表每周第一个交易日，-1代表每周倒数第一个交易日，用户可以不填写。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的代码片段非常简单，在每周二固定运行打印一下现在的portfolio剩余的资金:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个参数</span>
<span class="k">def</span> <span class="nf">log_cash</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Remaning cash: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">context</span><span class="o">.</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="c1"># 每周二打印一下剩余资金：</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_weekly</span><span class="p">(</span><span class="n">log_cash</span><span class="p">,</span> <span class="n">weekday</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># 每周第二个交易日打印剩余资金：</span>
    <span class="c1">#scheduler.run_weekly(log_cash, tradingday=2)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="scheduler-run-monthly">
<h3>scheduler.run_monthly - 每月运行<a class="headerlink" href="#scheduler-run-monthly" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.scheduler.run_monthly">
<code class="descclassname">scheduler.</code><code class="descname">run_monthly</code><span class="sig-paren">(</span><em>function</em>, <em>tradingday=t</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.scheduler.run_monthly" title="Permalink to this definition">¶</a></dt>
<dd><p>每月运行一次指定的函数，只能在init内使用。</p>
<p>注意:</p>
<ul class="simple">
<li>tradingday的负数表示倒数。</li>
<li>tradingday表示交易日，如某月只有三个交易日，则此月的tradingday=3与tradingday=-1表示同一。</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>func</em>) &#8211; 使传入的function每日交易开始前运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数。</li>
<li><strong>tradingday</strong> (<em>int</em>) &#8211; 范围为[-23,1], [1,23] ，例如，1代表每月第一个交易日，-1代表每月倒数第一个交易日，用户必须指定。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的代码片段非常简单的展示了每个月第一个交易日的时候我们进行一次财务数据查询，这样子会非常有用在一些根据财务数据来自动调节仓位股票组合的算法来说:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个参数</span>
<span class="k">def</span> <span class="nf">query_fundamental</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
        <span class="c1"># 查询revenue前十名的公司的股票并且他们的pe_ratio在25和30之间。打fundamentals的时候会有auto-complete方便写查询代码。</span>
    <span class="n">fundamental_df</span> <span class="o">=</span> <span class="n">get_fundamentals</span><span class="p">(</span>
        <span class="n">query</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">income_statement</span><span class="o">.</span><span class="n">revenue</span><span class="p">,</span> <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span>
        <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span> <span class="o">&gt;</span> <span class="mi">25</span>
        <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span> <span class="o">&lt;</span> <span class="mi">30</span>
        <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">income_statement</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">desc</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span>
            <span class="mi">10</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># 将查询结果dataframe的fundamental_df存放在context里面以备后面只需：</span>
    <span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span> <span class="o">=</span> <span class="n">fundamental_df</span>

    <span class="c1"># 实时打印日志看下查询结果，会有我们精心处理的数据表格显示：</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span><span class="p">)</span>
    <span class="n">update_universe</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

 <span class="c1"># 在这个方法中编写任何的初始化逻辑。context对象将会在你的算法策略的任何方法之间做传递。</span>
<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1"># 每月的第一个交易日查询以下财务数据，以确保可以拿到最新更新的财务数据信息用来调整仓位</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_monthly</span><span class="p">(</span><span class="n">query_fundamental</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="time-rule">
<h3>time_rule - 定时间运行<a class="headerlink" href="#time-rule" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>scheduler还可以用来做定时间运行，比如在每天开盘后的一小时后或一分钟后定时运行，这里有很多种组合可以让您达到各种自己想要达到的定时运行的目的。</p>
<p>使用的方法是和上面的 <a class="reference internal" href="#rqalpha.api.scheduler.run_daily" title="rqalpha.api.scheduler.run_daily"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_daily()</span></code></a> , <a class="reference internal" href="#rqalpha.api.scheduler.run_weekly" title="rqalpha.api.scheduler.run_weekly"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_weekly()</span></code></a> 和 <a class="reference internal" href="#rqalpha.api.scheduler.run_monthly" title="rqalpha.api.scheduler.run_monthly"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_monthly()</span></code></a> 进行组合加入time_rule来一起使用。</p>
<p>注意:</p>
<ul class="simple">
<li>market_open与market_close都跟随中国A股交易时间进行设置，即09:31~15:00。</li>
<li>使用time_rule定时运行只会在分钟级别回测和实时模拟交易中有定义的效果，在日回测中只会默认依然在该天运行，并不能在固定的时间运行。</li>
<li>在分钟回测中如未指定time_rule,则默认在开盘后一分钟运行,即09:31分。</li>
<li>如果两个schedule，分别使用market_open 与market_close规则，但规则触发时间在同一时刻，则market_open的handle一定在market_close的handle前执行。</li>
<li>目前暂不支持开盘交易(即 09:30分交易) ,所以time_rule(minute=0) 和time_rule(hour=0) 将不会触发任何事件。</li>
<li>market_open(minute=120)将在11:30执行， market_open(minute=121)在13:01执行，中午休市的区间会被忽略。</li>
<li>time_rule=&#8217;before_trading&#8217;表示在开市交易前运行scheduler函数。该函数运行时间将在before_trading函数运行完毕之后handle_bar运行之前。</li>
</ul>
<p><cite>time_rule</cite>: 定时具体几点几分运行某个函数。time_rule=&#8217;before_trading&#8217; 表示开始交易前运行；market_open(hour=x, minute=y)表示A股市场开市后x小时y分钟运行，market_close(hour=x, minute=y)表示A股市场收市前x小时y分钟运行。如果不设置time_rule默认的值是中国A股市场开市后一分钟运行。</p>
<p>market_open, market_close参数如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">注释</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>hour</td>
<td>int - option [1,4]</td>
<td>具体在market_open/market_close后/前第多少小时执行, 股票的交易时间为[9:31 - 11:30],[13:01 - 15:00]共240分钟，所以hour的范围为 [1,4]</td>
</tr>
<tr class="row-odd"><td>minute</td>
<td>int - option [1,240]</td>
<td>具体在market_open/market_close的后/前第多少分钟执行,同上，股票每天交易时间240分钟，所以minute的范围为 [1,240],中午休市的时间区间会被忽略。</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">每天的开市后10分钟运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_open</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每周的第t个交易日闭市前1小时运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_weekly</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_close</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每月的第t个交易日开市后1小时运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_monthly</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_open</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每天开始交易前运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="s1">&#39;before_trading&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id3">
<h2>数据查询相关函数<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="all-instruments">
<h3>all_instruments - 所有合约基础信息<a class="headerlink" href="#all-instruments" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.all_instruments">
<code class="descclassname">rqalpha.api.</code><code class="descname">all_instruments</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.all_instruments" title="Permalink to this definition">¶</a></dt>
<dd><p>获取某个国家市场的所有合约信息。使用者可以通过这一方法很快地对合约信息有一个快速了解，目前仅支持中国市场。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>type</strong> (<em>str</em>) &#8211; 需要查询合约类型，例如：type=&#8217;CS&#8217;代表股票。默认是所有类型</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><cite>pandas DataFrame</cite> 所有合约的基本信息。</td>
</tr>
</tbody>
</table>
<p>其中type参数传入的合约类型和对应的解释如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">合约类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CS</td>
<td>Common Stock, 即股票</td>
</tr>
<tr class="row-odd"><td>ETF</td>
<td>Exchange Traded Fund, 即交易所交易基金</td>
</tr>
<tr class="row-even"><td>LOF</td>
<td>Listed Open-Ended Fund，即上市型开放式基金</td>
</tr>
<tr class="row-odd"><td>FenjiMu</td>
<td>Fenji Mu Fund, 即分级母基金</td>
</tr>
<tr class="row-even"><td>FenjiA</td>
<td>Fenji A Fund, 即分级A类基金</td>
</tr>
<tr class="row-odd"><td>FenjiB</td>
<td>Fenji B Funds, 即分级B类基金</td>
</tr>
<tr class="row-even"><td>INDX</td>
<td>Index, 即指数</td>
</tr>
<tr class="row-odd"><td>Future</td>
<td>Futures，即期货，包含股指、国债和商品期货</td>
</tr>
<tr class="row-even"><td>hour</td>
<td>int - option [1,4]</td>
</tr>
<tr class="row-odd"><td>minute</td>
<td>int - option [1,240]</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>获取中国市场所有分级基金的基础信息:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">all_instruments</span><span class="p">(</span><span class="s1">&#39;FenjiA&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
    <span class="n">abbrev_symbol</span>    <span class="n">order_book_id</span>    <span class="n">product</span>    <span class="n">sector_code</span>  <span class="n">symbol</span>
<span class="mi">0</span>    <span class="n">CYGA</span>    <span class="mf">150303.</span><span class="n">XSHE</span>    <span class="n">null</span>    <span class="n">null</span>    <span class="n">华安创业板50A</span>
<span class="mi">1</span>    <span class="n">JY500A</span>    <span class="mf">150088.</span><span class="n">XSHE</span>    <span class="n">null</span>    <span class="n">null</span>    <span class="n">金鹰500A</span>
<span class="mi">2</span>    <span class="n">TD500A</span>    <span class="mf">150053.</span><span class="n">XSHE</span>    <span class="n">null</span>    <span class="n">null</span>    <span class="n">泰达稳健</span>
<span class="mi">3</span>    <span class="n">HS500A</span>    <span class="mf">150110.</span><span class="n">XSHE</span>    <span class="n">null</span>    <span class="n">null</span>    <span class="n">华商500A</span>
<span class="mi">4</span>    <span class="n">QSAJ</span>    <span class="mf">150235.</span><span class="n">XSHE</span>    <span class="n">null</span>    <span class="n">null</span>    <span class="n">鹏华证券A</span>
<span class="o">...</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="instruments">
<h3>instruments - 合约详细信息<a class="headerlink" href="#instruments" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.instruments">
<code class="descclassname">rqalpha.api.</code><code class="descname">instruments</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.instruments" title="Permalink to this definition">¶</a></dt>
<dd><p>获取某个国家市场内一个或多个合约的详细信息。目前仅支持中国市场。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order_book_id</strong> (<cite>str</cite> | List[<cite>str</cite>]) &#8211; 合约代码或者合约代码列表</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">StockInstrument</span></code> | <code class="xref py py-class docutils literal"><span class="pre">FutureInstrument</span></code></td>
</tr>
</tbody>
</table>
<p>目前系统并不支持跨国家市场的同时调用。传入 order_book_id list必须属于同一国家市场，不能混合着中美两个国家市场的order_book_id。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">获取单一股票合约的详细信息:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">instruments</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="n">Instrument</span><span class="p">(</span><span class="n">order_book_id</span><span class="o">=</span><span class="mf">000001.</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">平安银行</span><span class="p">,</span> <span class="n">abbrev_symbol</span><span class="o">=</span><span class="n">PAYH</span><span class="p">,</span> <span class="n">listed_date</span><span class="o">=</span><span class="mi">19910403</span><span class="p">,</span> <span class="n">de_listed_date</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">board_type</span><span class="o">=</span><span class="n">MainBoard</span><span class="p">,</span> <span class="n">sector_code_name</span><span class="o">=</span><span class="n">金融</span><span class="p">,</span> <span class="n">sector_code</span><span class="o">=</span><span class="n">Financials</span><span class="p">,</span> <span class="n">round_lot</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">special_type</span><span class="o">=</span><span class="n">Normal</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Active</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">获取多个股票合约的详细信息:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">instruments</span><span class="p">([</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="s1">&#39;000024.XSHE&#39;</span><span class="p">])</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span><span class="n">Instrument</span><span class="p">(</span><span class="n">order_book_id</span><span class="o">=</span><span class="mf">000001.</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">平安银行</span><span class="p">,</span> <span class="n">abbrev_symbol</span><span class="o">=</span><span class="n">PAYH</span><span class="p">,</span> <span class="n">listed_date</span><span class="o">=</span><span class="mi">19910403</span><span class="p">,</span> <span class="n">de_listed_date</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">board_type</span><span class="o">=</span><span class="n">MainBoard</span><span class="p">,</span> <span class="n">sector_code_name</span><span class="o">=</span><span class="n">金融</span><span class="p">,</span> <span class="n">sector_code</span><span class="o">=</span><span class="n">Financials</span><span class="p">,</span> <span class="n">round_lot</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">special_type</span><span class="o">=</span><span class="n">Normal</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Active</span><span class="p">),</span> <span class="n">Instrument</span><span class="p">(</span><span class="n">order_book_id</span><span class="o">=</span><span class="mf">000024.</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">招商地产</span><span class="p">,</span> <span class="n">abbrev_symbol</span><span class="o">=</span><span class="n">ZSDC</span><span class="p">,</span> <span class="n">listed_date</span><span class="o">=</span><span class="mi">19930607</span><span class="p">,</span> <span class="n">de_listed_date</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">board_type</span><span class="o">=</span><span class="n">MainBoard</span><span class="p">,</span> <span class="n">sector_code_name</span><span class="o">=</span><span class="n">金融</span><span class="p">,</span> <span class="n">sector_code</span><span class="o">=</span><span class="n">Financials</span><span class="p">,</span> <span class="n">round_lot</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="n">XSHE</span><span class="p">,</span> <span class="n">special_type</span><span class="o">=</span><span class="n">Normal</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Active</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">获取合约已上市天数:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">days_from_listed</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">获取合约距离到期天数:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="s1">&#39;IF1701&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">days_to_expire</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</dd></dl>

</div>
<div class="section" id="industry">
<h3>industry - 行业股票列表<a class="headerlink" href="#industry" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.industry">
<code class="descclassname">rqalpha.api.</code><code class="descname">industry</code><span class="sig-paren">(</span><em>industry_code</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.industry" title="Permalink to this definition">¶</a></dt>
<dd><p>获得属于某一行业的所有股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>industry_code</strong> (<em>str</em>) &#8211; 行业名称或行业代码。例如，农业可填写industry_code.A01 或 &#8216;A01&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of order_book_id 获得属于某一行业的所有股票</td>
</tr>
</tbody>
</table>
<p>我们目前使用的行业分类来自于中国国家统计局的 <a class="reference external" href="http://www.stats.gov.cn/tjsj/tjbz/hyflbz/">国民经济行业分类</a> ，可以使用这里的任何一个行业代码来调用行业的股票列表：</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">行业代码</th>
<th class="head">行业名称</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A01</td>
<td>农业</td>
</tr>
<tr class="row-odd"><td>A02</td>
<td>林业</td>
</tr>
<tr class="row-even"><td>A03</td>
<td>畜牧业</td>
</tr>
<tr class="row-odd"><td>A04</td>
<td>渔业</td>
</tr>
<tr class="row-even"><td>A05</td>
<td>农、林、牧、渔服务业</td>
</tr>
<tr class="row-odd"><td>B06</td>
<td>煤炭开采和洗选业</td>
</tr>
<tr class="row-even"><td>B07</td>
<td>石油和天然气开采业</td>
</tr>
<tr class="row-odd"><td>B08</td>
<td>黑色金属矿采选业</td>
</tr>
<tr class="row-even"><td>B09</td>
<td>有色金属矿采选业</td>
</tr>
<tr class="row-odd"><td>B10</td>
<td>非金属矿采选业</td>
</tr>
<tr class="row-even"><td>B11</td>
<td>开采辅助活动</td>
</tr>
<tr class="row-odd"><td>B12</td>
<td>其他采矿业</td>
</tr>
<tr class="row-even"><td>C13</td>
<td>农副食品加工业</td>
</tr>
<tr class="row-odd"><td>C14</td>
<td>食品制造业</td>
</tr>
<tr class="row-even"><td>C15</td>
<td>酒、饮料和精制茶制造业</td>
</tr>
<tr class="row-odd"><td>C16</td>
<td>烟草制品业</td>
</tr>
<tr class="row-even"><td>C17</td>
<td>纺织业</td>
</tr>
<tr class="row-odd"><td>C18</td>
<td>纺织服装、服饰业</td>
</tr>
<tr class="row-even"><td>C19</td>
<td>皮革、毛皮、羽毛及其制品和制鞋业</td>
</tr>
<tr class="row-odd"><td>C20</td>
<td>木材加工及木、竹、藤、棕、草制品业</td>
</tr>
<tr class="row-even"><td>C21</td>
<td>家具制造业</td>
</tr>
<tr class="row-odd"><td>C22</td>
<td>造纸及纸制品业</td>
</tr>
<tr class="row-even"><td>C23</td>
<td>印刷和记录媒介复制业</td>
</tr>
<tr class="row-odd"><td>C24</td>
<td>文教、工美、体育和娱乐用品制造业</td>
</tr>
<tr class="row-even"><td>C25</td>
<td>石油加工、炼焦及核燃料加工业</td>
</tr>
<tr class="row-odd"><td>C26</td>
<td>化学原料及化学制品制造业</td>
</tr>
<tr class="row-even"><td>C27</td>
<td>医药制造业</td>
</tr>
<tr class="row-odd"><td>C28</td>
<td>化学纤维制造业</td>
</tr>
<tr class="row-even"><td>C29</td>
<td>橡胶和塑料制品业</td>
</tr>
<tr class="row-odd"><td>C30</td>
<td>非金属矿物制品业</td>
</tr>
<tr class="row-even"><td>C31</td>
<td>黑色金属冶炼及压延加工业</td>
</tr>
<tr class="row-odd"><td>C32</td>
<td>有色金属冶炼和压延加工业</td>
</tr>
<tr class="row-even"><td>C33</td>
<td>金属制品业</td>
</tr>
<tr class="row-odd"><td>C34</td>
<td>通用设备制造业</td>
</tr>
<tr class="row-even"><td>C35</td>
<td>专用设备制造业</td>
</tr>
<tr class="row-odd"><td>C36</td>
<td>汽车制造业</td>
</tr>
<tr class="row-even"><td>C37</td>
<td>铁路、船舶、航空航天和其它运输设备制造业</td>
</tr>
<tr class="row-odd"><td>C38</td>
<td>电气机械及器材制造业</td>
</tr>
<tr class="row-even"><td>C39</td>
<td>计算机、通信和其他电子设备制造业</td>
</tr>
<tr class="row-odd"><td>C40</td>
<td>仪器仪表制造业</td>
</tr>
<tr class="row-even"><td>C41</td>
<td>其他制造业</td>
</tr>
<tr class="row-odd"><td>C42</td>
<td>废弃资源综合利用业</td>
</tr>
<tr class="row-even"><td>C43</td>
<td>金属制品、机械和设备修理业</td>
</tr>
<tr class="row-odd"><td>D44</td>
<td>电力、热力生产和供应业</td>
</tr>
<tr class="row-even"><td>D45</td>
<td>燃气生产和供应业</td>
</tr>
<tr class="row-odd"><td>D46</td>
<td>水的生产和供应业</td>
</tr>
<tr class="row-even"><td>E47</td>
<td>房屋建筑业</td>
</tr>
<tr class="row-odd"><td>E48</td>
<td>土木工程建筑业</td>
</tr>
<tr class="row-even"><td>E49</td>
<td>建筑安装业</td>
</tr>
<tr class="row-odd"><td>E50</td>
<td>建筑装饰和其他建筑业</td>
</tr>
<tr class="row-even"><td>F51</td>
<td>批发业</td>
</tr>
<tr class="row-odd"><td>F52</td>
<td>零售业</td>
</tr>
<tr class="row-even"><td>G53</td>
<td>铁路运输业</td>
</tr>
<tr class="row-odd"><td>G54</td>
<td>道路运输业</td>
</tr>
<tr class="row-even"><td>G55</td>
<td>水上运输业</td>
</tr>
<tr class="row-odd"><td>G56</td>
<td>航空运输业</td>
</tr>
<tr class="row-even"><td>G57</td>
<td>管道运输业</td>
</tr>
<tr class="row-odd"><td>G58</td>
<td>装卸搬运和运输代理业</td>
</tr>
<tr class="row-even"><td>G59</td>
<td>仓储业</td>
</tr>
<tr class="row-odd"><td>G60</td>
<td>邮政业</td>
</tr>
<tr class="row-even"><td>H61</td>
<td>住宿业</td>
</tr>
<tr class="row-odd"><td>H62</td>
<td>餐饮业</td>
</tr>
<tr class="row-even"><td>I63</td>
<td>电信、广播电视和卫星传输服务</td>
</tr>
<tr class="row-odd"><td>I64</td>
<td>互联网和相关服务</td>
</tr>
<tr class="row-even"><td>I65</td>
<td>软件和信息技术服务业</td>
</tr>
<tr class="row-odd"><td>J66</td>
<td>货币金融服务</td>
</tr>
<tr class="row-even"><td>J67</td>
<td>资本市场服务</td>
</tr>
<tr class="row-odd"><td>J68</td>
<td>保险业</td>
</tr>
<tr class="row-even"><td>J69</td>
<td>其他金融业</td>
</tr>
<tr class="row-odd"><td>K70</td>
<td>房地产业</td>
</tr>
<tr class="row-even"><td>L71</td>
<td>租赁业</td>
</tr>
<tr class="row-odd"><td>L72</td>
<td>商务服务业</td>
</tr>
<tr class="row-even"><td>M73</td>
<td>研究和试验发展</td>
</tr>
<tr class="row-odd"><td>M74</td>
<td>专业技术服务业</td>
</tr>
<tr class="row-even"><td>M75</td>
<td>科技推广和应用服务业</td>
</tr>
<tr class="row-odd"><td>N76</td>
<td>水利管理业</td>
</tr>
<tr class="row-even"><td>N77</td>
<td>生态保护和环境治理业</td>
</tr>
<tr class="row-odd"><td>N78</td>
<td>公共设施管理业</td>
</tr>
<tr class="row-even"><td>O79</td>
<td>居民服务业</td>
</tr>
<tr class="row-odd"><td>O80</td>
<td>机动车、电子产品和日用产品修理业</td>
</tr>
<tr class="row-even"><td>O81</td>
<td>其他服务业</td>
</tr>
<tr class="row-odd"><td>P82</td>
<td>教育</td>
</tr>
<tr class="row-even"><td>Q83</td>
<td>卫生</td>
</tr>
<tr class="row-odd"><td>Q84</td>
<td>社会工作</td>
</tr>
<tr class="row-even"><td>R85</td>
<td>新闻和出版业</td>
</tr>
<tr class="row-odd"><td>R86</td>
<td>广播、电视、电影和影视录音制作业</td>
</tr>
<tr class="row-even"><td>R87</td>
<td>文化艺术业</td>
</tr>
<tr class="row-odd"><td>R88</td>
<td>体育</td>
</tr>
<tr class="row-even"><td>R89</td>
<td>娱乐业</td>
</tr>
<tr class="row-odd"><td>S90</td>
<td>综合</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">stock_list</span> <span class="o">=</span> <span class="n">industry</span><span class="p">(</span><span class="s1">&#39;A01&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;农业股票列表：&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stock_list</span><span class="p">))</span>

<span class="c1">#INITINFO 农业股票列表：[&#39;600354.XSHG&#39;, &#39;601118.XSHG&#39;, &#39;002772.XSHE&#39;, &#39;600371.XSHG&#39;, &#39;600313.XSHG&#39;, &#39;600672.XSHG&#39;, &#39;600359.XSHG&#39;, &#39;300143.XSHE&#39;, &#39;002041.XSHE&#39;, &#39;600762.XSHG&#39;, &#39;600540.XSHG&#39;, &#39;300189.XSHE&#39;, &#39;600108.XSHG&#39;, &#39;300087.XSHE&#39;, &#39;600598.XSHG&#39;, &#39;000998.XSHE&#39;, &#39;600506.XSHG&#39;]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="sector">
<h3>sector - 板块股票列表<a class="headerlink" href="#sector" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.sector">
<code class="descclassname">rqalpha.api.</code><code class="descname">sector</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.sector" title="Permalink to this definition">¶</a></dt>
<dd><p>获得属于某一板块的所有股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 板块名称或板块代码。例如，能源板块可填写&#8217;Energy&#8217;、&#8217;能源&#8217;或sector_code.Energy
:type code: <cite>str</cite> | <cite>sector_code</cite></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of order_book_id 属于该板块的股票列表</td>
</tr>
</tbody>
</table>
<p>目前支持的板块分类如下，其取值参考自MSCI发布的全球行业标准分类:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">板块代码</th>
<th class="head">中文板块名称</th>
<th class="head">英文板块名称</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Energy</td>
<td>能源</td>
<td>energy</td>
</tr>
<tr class="row-odd"><td>Materials</td>
<td>原材料</td>
<td>materials</td>
</tr>
<tr class="row-even"><td>ConsumerDiscretionary</td>
<td>非必需消费品</td>
<td>consumer discretionary</td>
</tr>
<tr class="row-odd"><td>ConsumerStaples</td>
<td>必需消费品</td>
<td>consumer staples</td>
</tr>
<tr class="row-even"><td>HealthCare</td>
<td>医疗保健</td>
<td>health care</td>
</tr>
<tr class="row-odd"><td>Financials</td>
<td>金融</td>
<td>financials</td>
</tr>
<tr class="row-even"><td>InformationTechnology</td>
<td>信息技术</td>
<td>information technology</td>
</tr>
<tr class="row-odd"><td>TelecommunicationServices</td>
<td>电信服务</td>
<td>telecommunication services</td>
</tr>
<tr class="row-even"><td>Utilities</td>
<td>公共服务</td>
<td>utilities</td>
</tr>
<tr class="row-odd"><td>Industrials</td>
<td>工业</td>
<td>industrials</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">ids1</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;consumer discretionary&quot;</span><span class="p">)</span>
    <span class="n">ids2</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;非必需消费品&quot;</span><span class="p">)</span>
    <span class="n">ids3</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;ConsumerDiscretionary&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">ids1</span> <span class="o">==</span> <span class="n">ids2</span> <span class="ow">and</span> <span class="n">ids1</span> <span class="o">==</span> <span class="n">ids3</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">ids1</span><span class="p">)</span>
<span class="c1">#INIT INFO</span>
<span class="c1">#[&#39;002045.XSHE&#39;, &#39;603099.XSHG&#39;, &#39;002486.XSHE&#39;, &#39;002536.XSHE&#39;, &#39;300100.XSHE&#39;, &#39;600633.XSHG&#39;, &#39;002291.XSHE&#39;, ..., &#39;600233.XSHG&#39;]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="concept">
<h3>concept - 概念股票列表<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.concept">
<code class="descclassname">rqalpha.api.</code><code class="descname">concept</code><span class="sig-paren">(</span><em>concept_name1</em>, <em>concept_name2</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.concept" title="Permalink to this definition">¶</a></dt>
<dd><p>获取属于某个或某几个概念的股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>concept_names</strong> &#8211; 概念名称。可以从概念列表中选择一个或多个概念填写
:type concept_names: str | 多个 str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">属于该概念的股票 <cite>order_book_id</cite> 或者 list[<cite>order_book_id</cite>]</td>
</tr>
</tbody>
</table>
<p>概念列表:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">含H股</span>        <span class="n">深圳本地</span>        <span class="n">含B股</span>        <span class="n">农村金融</span>        <span class="n">东亚自贸</span>        <span class="n">海工装备</span>        <span class="n">绿色照明</span>        <span class="n">稀土永磁</span>        <span class="n">内贸规划</span>        <span class="mi">3</span><span class="n">D打印</span>
<span class="n">页岩气</span>        <span class="n">三网融合</span>        <span class="n">风能概念</span>        <span class="n">金融改革</span>        <span class="n">猪肉</span>            <span class="n">水域改革</span>        <span class="n">风能</span>            <span class="n">赛马概念</span>        <span class="n">社保重仓</span>        <span class="n">物联网</span>
<span class="n">民营医院</span>        <span class="n">黄河三角</span>        <span class="n">固废处理</span>        <span class="n">甲型流感</span>        <span class="n">丝绸之路</span>        <span class="n">融资融券</span>        <span class="n">黄金概念</span>        <span class="n">抗癌</span>            <span class="n">国企改革</span>        <span class="n">碳纤维</span>
<span class="n">保障房</span>        <span class="n">智能电网</span>        <span class="n">石墨烯</span>        <span class="n">空气治理</span>        <span class="n">京津冀</span>        <span class="n">分拆上市</span>        <span class="n">装饰园林</span>        <span class="n">振兴沈阳</span>        <span class="n">智能家居</span>        <span class="n">阿里概念</span>
<span class="n">股期概念</span>        <span class="n">新能源</span>        <span class="n">生物疫苗</span>        <span class="n">特斯拉</span>        <span class="n">国产软件</span>        <span class="n">互联金融</span>        <span class="n">锂电池</span>        <span class="n">保险重仓</span>        <span class="n">粤港澳</span>        <span class="n">自贸区</span>
<span class="n">安防服务</span>        <span class="n">广东自贸</span>        <span class="n">汽车电子</span>        <span class="n">超大盘</span>        <span class="n">低碳经济</span>        <span class="n">云计算</span>        <span class="n">婴童概念</span>        <span class="n">建筑节能</span>        <span class="n">土地流转</span>        <span class="n">智能机器</span>
<span class="n">未股改</span>        <span class="n">触摸屏</span>        <span class="n">天津自贸</span>        <span class="n">生物质能</span>        <span class="n">前海概念</span>        <span class="n">抗流感</span>        <span class="n">卫星导航</span>        <span class="n">多晶硅</span>        <span class="n">出口退税</span>        <span class="n">参股金融</span>
<span class="n">准ST股</span>        <span class="n">食品安全</span>        <span class="n">智能穿戴</span>        <span class="n">业绩预降</span>        <span class="n">污水处理</span>        <span class="n">重组概念</span>        <span class="n">上海自贸</span>        <span class="n">外资背景</span>        <span class="n">信托重仓</span>        <span class="n">本月解禁</span>
<span class="n">体育概念</span>        <span class="n">维生素</span>        <span class="n">基金重仓</span>        <span class="n">充电桩</span>        <span class="n">IPV6概念</span>        <span class="n">资产注入</span>        <span class="n">生态农业</span>        <span class="n">基因概念</span>        <span class="n">图们江</span>        <span class="n">O2O模式</span>
<span class="n">铁路基建</span>        <span class="n">摘帽概念</span>        <span class="n">股权激励</span>        <span class="n">电子支付</span>        <span class="n">机器人概念</span>    <span class="n">油气改革</span>        <span class="n">风沙治理</span>        <span class="n">央企50</span>        <span class="n">水利建设</span>        <span class="n">养老概念</span>
<span class="n">QFII重仓</span>        <span class="n">迪士尼</span>        <span class="n">业绩预升</span>        <span class="n">宽带提速</span>        <span class="n">长株潭</span>        <span class="n">超导概念</span>        <span class="n">网络游戏</span>        <span class="n">含可转债</span>        <span class="mi">4</span><span class="n">G概念</span>        <span class="n">送转潜力</span>
<span class="n">奢侈品</span>        <span class="n">新三板</span>        <span class="n">皖江区域</span>        <span class="n">核电核能</span>        <span class="n">海峡西岸</span>        <span class="n">次新股</span>        <span class="n">高校背景</span>        <span class="n">券商重仓</span>        <span class="n">基因测序</span>        <span class="n">节能</span>
<span class="n">三沙概念</span>        <span class="n">日韩贸易</span>        <span class="n">氢燃料</span>        <span class="n">陕甘宁</span>        <span class="n">文化振兴</span>        <span class="n">民营银行</span>        <span class="n">苹果概念</span>        <span class="n">稀缺资源</span>        <span class="n">基因芯片</span>        <span class="n">循环经济</span>
<span class="n">聚氨酯</span>        <span class="n">金融参股</span>        <span class="n">沿海发展</span>        <span class="n">智能交通</span>        <span class="n">海上丝路</span>        <span class="n">ST板块</span>        <span class="n">涉矿概念</span>        <span class="n">蓝宝石</span>        <span class="n">博彩概念</span>        <span class="n">电商概念</span>
<span class="n">整体上市</span>        <span class="n">草甘膦</span>        <span class="n">创投概念</span>        <span class="n">超级细菌</span>        <span class="n">信息安全</span>        <span class="n">生物燃料</span>        <span class="n">武汉规划</span>        <span class="n">节能环保</span>        <span class="n">成渝特区</span>        <span class="n">军工航天</span>
<span class="n">地热能</span>        <span class="n">上海本地</span>        <span class="n">生物育种</span>        <span class="n">燃料电池</span>        <span class="n">海水淡化</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><ul class="first simple">
<li>得到一个概念的股票列表:</li>
</ul>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">concept</span><span class="p">(</span><span class="s1">&#39;民营医院&#39;</span><span class="p">)</span>
<span class="c1">#[Out]</span>
<span class="c1">#[&#39;600105.XSHG&#39;,</span>
<span class="c1">#&#39;002550.XSHE&#39;,</span>
<span class="c1">#&#39;002004.XSHE&#39;,</span>
<span class="c1">#&#39;002424.XSHE&#39;,</span>
<span class="c1">#...]</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>得到某几个概念的股票列表:</li>
</ul>
<div class="last highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">concept</span><span class="p">(</span><span class="s1">&#39;民营医院&#39;</span><span class="p">,</span> <span class="s1">&#39;国企改革&#39;</span><span class="p">)</span>
<span class="c1">#[Out]</span>
<span class="c1">#[&#39;601607.XSHG&#39;,</span>
<span class="c1">#&#39;600748.XSHG&#39;,</span>
<span class="c1">#&#39;600630.XSHG&#39;,</span>
<span class="c1">#...]</span>
</pre></div>
</td></tr></table></div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="history-bars">
<h3>history_bars - 某一合约历史数据<a class="headerlink" href="#history-bars" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.history_bars">
<code class="descclassname">rqalpha.api.</code><code class="descname">history_bars</code><span class="sig-paren">(</span><em>order_book_id</em>, <em>bar_count</em>, <em>frequency</em>, <em>fields</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.history_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定合约的历史行情，同时支持日以及分钟历史数据。不能在init中调用。 注意，该API会自动跳过停牌数据。</p>
<p>日回测获取分钟历史数据：不支持</p>
<p>日回测获取日历史数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">调用时间</th>
<th class="head">返回数据</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>T日before_trading</td>
<td>T-1日day bar</td>
</tr>
<tr class="row-odd"><td>T日handle_bar</td>
<td>T日day bar</td>
</tr>
</tbody>
</table>
<p>分钟回测获取日历史数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">调用时间</th>
<th class="head">返回数据</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>T日before_trading</td>
<td>T-1日day bar</td>
</tr>
<tr class="row-odd"><td>T日handle_bar</td>
<td>T-1日day bar</td>
</tr>
</tbody>
</table>
<p>分钟回测获取分钟历史数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">调用时间</th>
<th class="head">返回数据</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>T日before_trading</td>
<td>T-1日最后一个minute bar</td>
</tr>
<tr class="row-odd"><td>T日handle_bar</td>
<td>T日当前minute bar</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>order_book_id</strong> (<cite>str</cite>) &#8211; 合约代码或者合约代码列表</li>
<li><strong>bar_count</strong> (<em>int</em>) &#8211; 获取的历史数据数量，必填项</li>
<li><strong>frequency</strong> (<em>str</em>) &#8211; 获取数据什么样的频率进行。&#8216;1d&#8217;或&#8216;1m&#8217;分别表示每日和每分钟，必填项</li>
<li><strong>fields</strong> (<em>str</em>) &#8211; 返回数据字段。必填项。见下方列表。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">fields</th>
<th class="head">字段名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>datetime</td>
<td>时间戳</td>
</tr>
<tr class="row-odd"><td>open</td>
<td>开盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>close</td>
<td>收盘价</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>成交量</td>
</tr>
<tr class="row-even"><td>total_turnover</td>
<td>成交额</td>
</tr>
<tr class="row-odd"><td>datetime</td>
<td>int类型时间戳</td>
</tr>
<tr class="row-even"><td>open_interest</td>
<td>持仓量（期货专用）</td>
</tr>
<tr class="row-odd"><td>basis_spread</td>
<td>期现差（股指期货专用）</td>
</tr>
<tr class="row-even"><td>settlement</td>
<td>结算价（期货日线专用）</td>
</tr>
<tr class="row-odd"><td>prev_settlement</td>
<td>结算价（期货日线专用）</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>ndarray</cite>, 方便直接与talib等计算库对接，效率较history返回的DataFrame更高。</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>获取最近5天的日线收盘价序列（策略当前日期为20160706）:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">history_bars</span><span class="p">(</span><span class="s1">&#39;000002.XSHE&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;1d&#39;</span><span class="p">,</span> <span class="s1">&#39;close&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span> <span class="mf">8.69</span>  <span class="mf">8.7</span>   <span class="mf">8.71</span>  <span class="mf">8.81</span>  <span class="mf">8.81</span><span class="p">]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="current-snapshot">
<h3>current_snapshot - 当前快照数据<a class="headerlink" href="#current-snapshot" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.current_snapshot">
<code class="descclassname">rqalpha.api.</code><code class="descname">current_snapshot</code><span class="sig-paren">(</span><em>order_book_id</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.current_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>获得当前市场快照数据。只能在日内交易阶段调用，获取当日调用时点的市场快照数据。市场快照数据记录了每日从开盘到当前的数据信息，可以理解为一个动态的day bar数据。在目前分钟回测中，快照数据为当日所有分钟线累积而成，一般情况下，最后一个分钟线获取到的快照数据应当与当日的日线行情保持一致。需要注意，在实盘模拟中，该函数返回的是调用当时的市场快照情况，所以在同一个handle_bar中不同时点调用可能返回的数据不同。如果当日截止到调用时候对应股票没有任何成交，那么snapshot中的close, high, low, last几个价格水平都将以0表示。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order_book_id</strong> (<em>str</em>) &#8211; 合约代码或简称</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Snapshot</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>在handle_bar中调用该函数，假设策略当前时间是20160104 09:33:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">current_snapshot</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span> <span class="mi">09</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mf">00.00</span>  <span class="n">INFO</span>
<span class="n">Snapshot</span><span class="p">(</span><span class="n">order_book_id</span><span class="p">:</span> <span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span> <span class="nb">open</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">high</span><span class="p">:</span> <span class="mf">10.025</span><span class="p">,</span> <span class="n">low</span><span class="p">:</span> <span class="mf">9.9667</span><span class="p">,</span> <span class="n">last</span><span class="p">:</span> <span class="mf">9.9917</span><span class="p">,</span> <span class="n">volume</span><span class="p">:</span> <span class="mi">2050320</span><span class="p">,</span> <span class="n">total_turnover</span><span class="p">:</span> <span class="mi">20485195</span><span class="p">,</span> <span class="n">prev_close</span><span class="p">:</span> <span class="mf">9.99</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="get-future-contracts">
<h3>get_future_contracts - 期货可交易合约列表<a class="headerlink" href="#get-future-contracts" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_future_contracts">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_future_contracts</code><span class="sig-paren">(</span><em>underlying_symbol</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_future_contracts" title="Permalink to this definition">¶</a></dt>
<dd><p>获取某一期货品种在策略当前日期的可交易合约order_book_id列表。按照到期月份，下标从小到大排列，返回列表中第一个合约对应的就是该品种的近月合约。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>underlying_symbol</strong> (<em>str</em>) &#8211; 期货合约品种，例如沪深300股指期货为&#8217;IF&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list[<cite>str</cite>]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>获取某一天的主力合约代码（策略当前日期是20161201）:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">get_future_contracts</span><span class="p">(</span><span class="s1">&#39;IF&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;IF1612&#39;</span><span class="p">,</span> <span class="s1">&#39;IF1701&#39;</span><span class="p">,</span> <span class="s1">&#39;IF1703&#39;</span><span class="p">,</span> <span class="s1">&#39;IF1706&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="get-trading-dates">
<h3>get_trading_dates - 交易日列表<a class="headerlink" href="#get-trading-dates" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_trading_dates">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_trading_dates</code><span class="sig-paren">(</span><em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_trading_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>获取某个国家市场的交易日列表（起止日期加入判断）。目前仅支持中国市场。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_date</strong> (<cite>str</cite> | <cite>date</cite> | <cite>datetime</cite> | <cite>pandas.Timestamp</cite>) &#8211; 开始日期</li>
<li><strong>end_date</strong> (<cite>str</cite> | <cite>date</cite> | <cite>datetime</cite> | <cite>pandas.Timestamp</cite>) &#8211; 结束如期</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list[<cite>datetime.date</cite>]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">get_trading_dates</span><span class="p">(</span><span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2016-05-05&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;20160505&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="get-previous-trading-date">
<h3>get_previous_trading_date - 上一交易日<a class="headerlink" href="#get-previous-trading-date" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_previous_trading_date">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_previous_trading_date</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_previous_trading_date" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定日期的上一交易日。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>date</strong> (<cite>str</cite> | <cite>date</cite> | <cite>datetime</cite> | <cite>pandas.Timestamp</cite>) &#8211; 指定日期</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><cite>datetime.date</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">get_previous_trading_date</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="s1">&#39;2016-05-02&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">29</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="get-next-trading-date">
<h3>get_next_trading_date - 下一交易日<a class="headerlink" href="#get-next-trading-date" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_next_trading_date">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_next_trading_date</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_next_trading_date" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定日期的下一交易日</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>date</strong> (<cite>str</cite> | <cite>date</cite> | <cite>datetime</cite> | <cite>pandas.Timestamp</cite>) &#8211; 指定日期</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><cite>datetime.date</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span><span class="n">get_next_trading_date</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="s1">&#39;2016-05-01&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
<span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="get-yield-curve">
<h3>get_yield_curve - 收益率曲线<a class="headerlink" href="#get-yield-curve" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.get_yield_curve">
<code class="descclassname">rqalpha.api.</code><code class="descname">get_yield_curve</code><span class="sig-paren">(</span><em>date=None</em>, <em>tenor=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.get_yield_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>获取某个国家市场指定日期的收益率曲线水平。</p>
<p>数据为2002年至今的中债国债收益率曲线，来源于中央国债登记结算有限责任公司。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>date</strong> (<cite>str</cite> | <cite>date</cite> | <cite>datetime</cite> | <cite>pandas.Timestamp</cite>) &#8211; 查询日期，默认为策略当前日期前一天</li>
<li><strong>tenor</strong> (<em>str</em>) &#8211; 标准期限，&#8216;0S&#8217; - 隔夜，&#8216;1M&#8217; - 1个月，&#8216;1Y&#8217; - 1年，默认为全部期限</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><cite>pandas.DataFrame</cite> - 查询时间段内无风险收益率曲线</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">In</span><span class="p">]</span>
<span class="n">get_yield_curve</span><span class="p">(</span><span class="s1">&#39;20130104&#39;</span><span class="p">)</span>

<span class="p">[</span><span class="n">Out</span><span class="p">]</span>
                <span class="mi">0</span><span class="n">S</span>      <span class="mi">1</span><span class="n">M</span>      <span class="mi">2</span><span class="n">M</span>      <span class="mi">3</span><span class="n">M</span>      <span class="mi">6</span><span class="n">M</span>      <span class="mi">9</span><span class="n">M</span>      <span class="mi">1</span><span class="n">Y</span>      <span class="mi">2</span><span class="n">Y</span>          <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.0196</span>  <span class="mf">0.0253</span>  <span class="mf">0.0288</span>  <span class="mf">0.0279</span>  <span class="mf">0.0280</span>  <span class="mf">0.0283</span>  <span class="mf">0.0292</span>  <span class="mf">0.0310</span>

                <span class="mi">3</span><span class="n">Y</span>      <span class="mi">4</span><span class="n">Y</span>   <span class="o">...</span>        <span class="mi">6</span><span class="n">Y</span>      <span class="mi">7</span><span class="n">Y</span>      <span class="mi">8</span><span class="n">Y</span>      <span class="mi">9</span><span class="n">Y</span>     <span class="mi">10</span><span class="n">Y</span>          <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.0314</span>  <span class="mf">0.0318</span>   <span class="o">...</span>    <span class="mf">0.0342</span>  <span class="mf">0.0350</span>  <span class="mf">0.0353</span>  <span class="mf">0.0357</span>  <span class="mf">0.0361</span>
<span class="o">...</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="is-suspended">
<h3>is_suspended - 全天停牌判断<a class="headerlink" href="#is-suspended" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.is_suspended">
<code class="descclassname">rqalpha.api.</code><code class="descname">is_suspended</code><span class="sig-paren">(</span><em>order_book_id</em>, <em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.is_suspended" title="Permalink to this definition">¶</a></dt>
<dd><p>判断某只股票是否全天停牌。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>order_book_id</strong> (<em>str</em>) &#8211; 某只股票的代码或股票代码列表，可传入单只股票的order_book_id, symbol</li>
<li><strong>count</strong> (<em>int</em>) &#8211; 回溯获取的数据个数。默认为当前能够获取到的最近的数据</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">count为1时 <cite>bool</cite>; count&gt;1时 <cite>pandas.DataFrame</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="is-st-stock-st">
<h3>is_st_stock - ST股判断<a class="headerlink" href="#is-st-stock-st" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.is_st_stock">
<code class="descclassname">rqalpha.api.</code><code class="descname">is_st_stock</code><span class="sig-paren">(</span><em>order_book_id</em>, <em>count=1</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.is_st_stock" title="Permalink to this definition">¶</a></dt>
<dd><p>判断一只或多只股票在一段时间内是否为ST股（包括ST与*ST）。</p>
<p>ST股是有退市风险因此风险比较大的股票，很多时候您也会希望判断自己使用的股票是否是&#8217;ST&#8217;股来避开这些风险大的股票。另外，我们目前的策略比赛也禁止了使用&#8217;ST&#8217;股。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>order_book_id</strong> (<em>str</em>) &#8211; 某只股票的代码或股票代码列表，可传入单只股票的order_book_id, symbol</li>
<li><strong>count</strong> (<em>int</em>) &#8211; 回溯获取的数据个数。默认为当前能够获取到的最近的数据</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">count为1时 <cite>bool</cite>; count&gt;1时 <cite>pandas.DataFrame</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="id5">
<h2>其他方法<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="section" id="update-universe">
<h3>update_universe<a class="headerlink" href="#update-universe" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.update_universe">
<code class="descclassname">rqalpha.api.</code><code class="descname">update_universe</code><span class="sig-paren">(</span><em>id_or_ins</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.update_universe" title="Permalink to this definition">¶</a></dt>
<dd><p>该方法用于更新现在关注的证券的集合（e.g.：股票池）。PS：会在下一个bar事件触发时候产生（新的关注的股票池更新）效果。并且update_universe会是覆盖（overwrite）的操作而不是在已有的股票池的基础上进行增量添加。比如已有的股票池为[&#8216;000001.XSHE&#8217;, &#8216;000024.XSHE&#8217;]然后调用了update_universe([&#8216;000030.XSHE&#8217;])之后，股票池就会变成000030.XSHE一个股票了，随后的数据更新也只会跟踪000030.XSHE这一个股票了。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 标的物</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="subscribe">
<h3>subscribe<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.subscribe">
<code class="descclassname">rqalpha.api.</code><code class="descname">subscribe</code><span class="sig-paren">(</span><em>id_or_ins</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>订阅合约行情。该操作会导致合约池内合约的增加，从而影响handle_bar中处理bar数据的数量。</p>
<p>需要注意，用户在初次编写策略时候需要首先订阅合约行情，否则handle_bar不会被触发。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 标的物</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="unsubscribe">
<h3>unsubscribe<a class="headerlink" href="#unsubscribe" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="rqalpha.api.unsubscribe">
<code class="descclassname">rqalpha.api.</code><code class="descname">unsubscribe</code><span class="sig-paren">(</span><em>id_or_ins</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.api.unsubscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>取消订阅合约行情。取消订阅会导致合约池内合约的减少，如果当前合约池中没有任何合约，则策略直接退出。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id_or_ins</strong> (<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code> object | <cite>str</cite> | List[<code class="xref py py-class docutils literal"><span class="pre">Instrument</span></code>] | List[<cite>str</cite>]) &#8211; 标的物</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-rqalpha.core.strategy_context">
<span id="context"></span><h2>Context属性<a class="headerlink" href="#module-rqalpha.core.strategy_context" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="rqalpha.core.strategy_context.RunInfo">
<em class="property">class </em><code class="descclassname">rqalpha.core.strategy_context.</code><code class="descname">RunInfo</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>策略运行信息</p>
<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.benchmark">
<code class="descname">benchmark</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">基准合约代码</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.commission_multiplier">
<code class="descname">commission_multiplier</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.commission_multiplier" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">手续费倍率</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.end_date">
<code class="descname">end_date</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.end_date" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">策略的结束日期</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.frequency">
<code class="descname">frequency</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.frequency" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">策略频率，&#8216;1d&#8217;或&#8216;1m&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.future_starting_cash">
<code class="descname">future_starting_cash</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.future_starting_cash" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">期货账户初始资金</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.margin_multiplier">
<code class="descname">margin_multiplier</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.margin_multiplier" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">保证金倍率</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.matching_type">
<code class="descname">matching_type</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.matching_type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">撮合方式</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.run_type">
<code class="descname">run_type</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.run_type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">运行类型</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.slippage">
<code class="descname">slippage</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.slippage" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">滑点水平</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.start_date">
<code class="descname">start_date</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.start_date" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">策略的开始日期</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.RunInfo.stock_starting_cash">
<code class="descname">stock_starting_cash</code><a class="headerlink" href="#rqalpha.core.strategy_context.RunInfo.stock_starting_cash" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">股票账户初始资金</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rqalpha.core.strategy_context.StrategyContext">
<em class="property">class </em><code class="descclassname">rqalpha.core.strategy_context.</code><code class="descname">StrategyContext</code><a class="headerlink" href="#rqalpha.core.strategy_context.StrategyContext" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.core.strategy_context.StrategyContext.now">
<code class="descname">now</code><a class="headerlink" href="#rqalpha.core.strategy_context.StrategyContext.now" title="Permalink to this definition">¶</a></dt>
<dd><p>使用以上的方式就可以在handle_bar中拿到当前的bar的时间，比如day bar的话就是那天的时间，minute bar的话就是这一分钟的时间点。</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.StrategyContext.portfolio">
<code class="descname">portfolio</code><a class="headerlink" href="#rqalpha.core.strategy_context.StrategyContext.portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>投资组合</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">属性</th>
<th class="head">类型</th>
<th class="head">注释</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>accounts</td>
<td>dict</td>
<td>账户字典</td>
</tr>
<tr class="row-odd"><td>start_date</td>
<td>datetime.datetime</td>
<td>策略投资组合的回测/实时模拟交易的开始日期</td>
</tr>
<tr class="row-even"><td>units</td>
<td>float</td>
<td>份额</td>
</tr>
<tr class="row-odd"><td>unit_net_value</td>
<td>float</td>
<td>净值</td>
</tr>
<tr class="row-even"><td>daily_pnl</td>
<td>float</td>
<td>当日盈亏，当日盈亏的加总</td>
</tr>
<tr class="row-odd"><td>daily_returns</td>
<td>float</td>
<td>投资组合每日收益率</td>
</tr>
<tr class="row-even"><td>total_returns</td>
<td>float</td>
<td>投资组合总收益率</td>
</tr>
<tr class="row-odd"><td>annualized_returns</td>
<td>float</td>
<td>投资组合的年化收益率</td>
</tr>
<tr class="row-even"><td>total_value</td>
<td>float</td>
<td>投资组合总权益</td>
</tr>
<tr class="row-odd"><td>positions</td>
<td>dict</td>
<td>一个包含所有仓位的字典，以order_book_id作为键，position对象作为值</td>
</tr>
<tr class="row-even"><td>cash</td>
<td>float</td>
<td>总的可用资金</td>
</tr>
<tr class="row-odd"><td>market_value</td>
<td>float</td>
<td>投资组合当前的市场价值，为子组合市场价值的加总</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Portfolio</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.StrategyContext.run_info">
<code class="descname">run_info</code><a class="headerlink" href="#rqalpha.core.strategy_context.StrategyContext.run_info" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><a class="reference internal" href="#rqalpha.core.strategy_context.RunInfo" title="rqalpha.core.strategy_context.RunInfo"><code class="xref py py-class docutils literal"><span class="pre">RunInfo</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.core.strategy_context.StrategyContext.universe">
<code class="descname">universe</code><a class="headerlink" href="#rqalpha.core.strategy_context.StrategyContext.universe" title="Permalink to this definition">¶</a></dt>
<dd><p>在运行 <code class="xref py py-func docutils literal"><span class="pre">update_universe()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">subscribe()</span></code> 或者 <code class="xref py py-func docutils literal"><span class="pre">unsubscribe()</span></code> 的时候，合约池会被更新。</p>
<p>需要注意，合约池内合约的交易时间（包含股票的策略默认会在股票交易时段触发）是handle_bar被触发的依据。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Property getter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list[<cite>str</cite>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id6">
<h2>类<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-rqalpha.model.bar">
<span id="bar"></span><h3>Bar<a class="headerlink" href="#module-rqalpha.model.bar" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.bar.BarObject">
<em class="property">class </em><code class="descclassname">rqalpha.model.bar.</code><code class="descname">BarObject</code><span class="sig-paren">(</span><em>instrument</em>, <em>data</em>, <em>dt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.bar.BarObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.high">
<code class="descname">high</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.high" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的最高价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.is_trading">
<code class="descname">is_trading</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.is_trading" title="Permalink to this definition">¶</a></dt>
<dd><p>[datetime.datetime] 时间戳</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.last">
<code class="descname">last</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.last" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当前最新价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.low">
<code class="descname">low</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.low" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的最低价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.open">
<code class="descname">open</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.open" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日开盘价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.open_interest">
<code class="descname">open_interest</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的持仓量（期货专用）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.order_book_id">
<code class="descname">order_book_id</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.order_book_id" title="Permalink to this definition">¶</a></dt>
<dd><p>[str] 交易标的代码</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.prev_close">
<code class="descname">prev_close</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.prev_close" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的最低价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.prev_settlement">
<code class="descname">prev_settlement</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.prev_settlement" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 昨日结算价（期货专用）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>[str] 合约简称</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.total_turnover">
<code class="descname">total_turnover</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.total_turnover" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的成交额</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.bar.BarObject.volume">
<code class="descname">volume</code><a class="headerlink" href="#rqalpha.model.bar.BarObject.volume" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的成交量</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.snapshot">
<span id="snapshot"></span><h3>Snapshot<a class="headerlink" href="#module-rqalpha.model.snapshot" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.snapshot.SnapshotObject">
<em class="property">class </em><code class="descclassname">rqalpha.model.snapshot.</code><code class="descname">SnapshotObject</code><span class="sig-paren">(</span><em>instrument</em>, <em>data</em>, <em>dt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.datetime">
<code class="descname">datetime</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>[datetime.datetime] 当前快照数据的时间戳</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.high">
<code class="descname">high</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.high" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的最高价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.last">
<code class="descname">last</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.last" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当前最新价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.low">
<code class="descname">low</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.low" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的最低价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.open">
<code class="descname">open</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.open" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日开盘价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.open_interest">
<code class="descname">open_interest</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的持仓量（期货专用）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.order_book_id">
<code class="descname">order_book_id</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.order_book_id" title="Permalink to this definition">¶</a></dt>
<dd><p>[str] 股票代码</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.prev_close">
<code class="descname">prev_close</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.prev_close" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 昨日收盘价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.prev_settlement">
<code class="descname">prev_settlement</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.prev_settlement" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 昨日结算价（期货专用）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.total_turnover">
<code class="descname">total_turnover</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.total_turnover" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的成交额</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.snapshot.SnapshotObject.volume">
<code class="descname">volume</code><a class="headerlink" href="#rqalpha.model.snapshot.SnapshotObject.volume" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 截止到当前的成交量</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.order">
<span id="order"></span><h3>Order<a class="headerlink" href="#module-rqalpha.model.order" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.order.Order">
<em class="property">class </em><code class="descclassname">rqalpha.model.order.</code><code class="descname">Order</code><a class="headerlink" href="#rqalpha.model.order.Order" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.order.Order.avg_price">
<code class="descname">avg_price</code><a class="headerlink" href="#rqalpha.model.order.Order.avg_price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 成交均价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.datetime">
<code class="descname">datetime</code><a class="headerlink" href="#rqalpha.model.order.Order.datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>[datetime.datetime] 订单创建时间</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.filled_quantity">
<code class="descname">filled_quantity</code><a class="headerlink" href="#rqalpha.model.order.Order.filled_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 订单已成交数量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.frozen_price">
<code class="descname">frozen_price</code><a class="headerlink" href="#rqalpha.model.order.Order.frozen_price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 冻结价格</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.message">
<code class="descname">message</code><a class="headerlink" href="#rqalpha.model.order.Order.message" title="Permalink to this definition">¶</a></dt>
<dd><p>[str] 信息。比如拒单时候此处会提示拒单原因</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.order_book_id">
<code class="descname">order_book_id</code><a class="headerlink" href="#rqalpha.model.order.Order.order_book_id" title="Permalink to this definition">¶</a></dt>
<dd><p>[str] 合约代码</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.order_id">
<code class="descname">order_id</code><a class="headerlink" href="#rqalpha.model.order.Order.order_id" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 唯一标识订单的id</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.position_effect">
<code class="descname">position_effect</code><a class="headerlink" href="#rqalpha.model.order.Order.position_effect" title="Permalink to this definition">¶</a></dt>
<dd><p>[POSITION_EFFECT] 订单开平（期货专用）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.price">
<code class="descname">price</code><a class="headerlink" href="#rqalpha.model.order.Order.price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 订单价格，只有在订单类型为&#8217;限价单&#8217;的时候才有意义</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.quantity">
<code class="descname">quantity</code><a class="headerlink" href="#rqalpha.model.order.Order.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 订单数量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.side">
<code class="descname">side</code><a class="headerlink" href="#rqalpha.model.order.Order.side" title="Permalink to this definition">¶</a></dt>
<dd><p>[SIDE] 订单方向</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.status">
<code class="descname">status</code><a class="headerlink" href="#rqalpha.model.order.Order.status" title="Permalink to this definition">¶</a></dt>
<dd><p>[ORDER_STATUS] 订单状态</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.trading_datetime">
<code class="descname">trading_datetime</code><a class="headerlink" href="#rqalpha.model.order.Order.trading_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>[datetime.datetime] 订单的交易日期（对应期货夜盘）</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.transaction_cost">
<code class="descname">transaction_cost</code><a class="headerlink" href="#rqalpha.model.order.Order.transaction_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 费用</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.type">
<code class="descname">type</code><a class="headerlink" href="#rqalpha.model.order.Order.type" title="Permalink to this definition">¶</a></dt>
<dd><p>[ORDER_TYPE] 订单类型</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.order.Order.unfilled_quantity">
<code class="descname">unfilled_quantity</code><a class="headerlink" href="#rqalpha.model.order.Order.unfilled_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 订单未成交数量</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.portfolio">
<span id="portfolio"></span><h3>Portfolio<a class="headerlink" href="#module-rqalpha.model.portfolio" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="module-rqalpha.model.account.stock_account">
<span id="stockaccount"></span><h3>StockAccount<a class="headerlink" href="#module-rqalpha.model.account.stock_account" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.account.stock_account.StockAccount">
<em class="property">class </em><code class="descclassname">rqalpha.model.account.stock_account.</code><code class="descname">StockAccount</code><span class="sig-paren">(</span><em>total_cash</em>, <em>positions</em>, <em>backward_trade_set=set([])</em>, <em>dividend_receivable=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">rqalpha.model.account.base_account.BaseAccount</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.cash">
<code class="descname">cash</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.cash" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 可用资金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.dividend_receivable">
<code class="descname">dividend_receivable</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.dividend_receivable" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 投资组合在分红现金收到账面之前的应收分红部分。具体细节在分红部分</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.frozen_cash">
<code class="descname">frozen_cash</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.frozen_cash" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 冻结资金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.market_value">
<code class="descname">market_value</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.market_value" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 市值</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.positions">
<code class="descname">positions</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>[dict] 持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.stock_account.StockAccount.transaction_cost">
<code class="descname">transaction_cost</code><a class="headerlink" href="#rqalpha.model.account.stock_account.StockAccount.transaction_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 总费用</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.account.future_account">
<span id="futureaccount"></span><h3>FutureAccount<a class="headerlink" href="#module-rqalpha.model.account.future_account" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.account.future_account.FutureAccount">
<em class="property">class </em><code class="descclassname">rqalpha.model.account.future_account.</code><code class="descname">FutureAccount</code><span class="sig-paren">(</span><em>total_cash</em>, <em>positions</em>, <em>backward_trade_set=set([])</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">rqalpha.model.account.base_account.BaseAccount</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.buy_margin">
<code class="descname">buy_margin</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.buy_margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.cash">
<code class="descname">cash</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.cash" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 可用资金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.daily_pnl">
<code class="descname">daily_pnl</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.daily_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.frozen_cash">
<code class="descname">frozen_cash</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.frozen_cash" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 冻结资金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.holding_pnl">
<code class="descname">holding_pnl</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.holding_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 浮动盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.margin">
<code class="descname">margin</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 总保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.market_value">
<code class="descname">market_value</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.market_value" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 市值</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.positions">
<code class="descname">positions</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>[dict] 持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.realized_pnl">
<code class="descname">realized_pnl</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.realized_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 平仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.sell_margin">
<code class="descname">sell_margin</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.sell_margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.account.future_account.FutureAccount.transaction_cost">
<code class="descname">transaction_cost</code><a class="headerlink" href="#rqalpha.model.account.future_account.FutureAccount.transaction_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 总费用</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.position.stock_position">
<span id="stockposition"></span><h3>StockPosition<a class="headerlink" href="#module-rqalpha.model.position.stock_position" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.position.stock_position.StockPosition">
<em class="property">class </em><code class="descclassname">rqalpha.model.position.stock_position.</code><code class="descname">StockPosition</code><span class="sig-paren">(</span><em>order_book_id</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">rqalpha.model.position.base_position.BasePosition</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.average_cost">
<code class="descname">average_cost</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.average_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>[已弃用] 请使用 avg_price 获取持仓买入均价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.avg_price">
<code class="descname">avg_price</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.avg_price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 获得该持仓的买入均价，计算方法为每次买入的数量做加权平均</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.bought_quantity">
<code class="descname">bought_quantity</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.bought_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.bought_value">
<code class="descname">bought_value</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.bought_value" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="method">
<dt id="rqalpha.model.position.stock_position.StockPosition.is_de_listed">
<code class="descname">is_de_listed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.is_de_listed" title="Permalink to this definition">¶</a></dt>
<dd><p>判断合约是否过期</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.quantity">
<code class="descname">quantity</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 当前持仓股数</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.sellable">
<code class="descname">sellable</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.sellable" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 该仓位可卖出股数。T＋1的市场中sellable = 所有持仓 - 今日买入的仓位 - 已冻结</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.sold_quantity">
<code class="descname">sold_quantity</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.sold_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.sold_value">
<code class="descname">sold_value</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.sold_value" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.total_orders">
<code class="descname">total_orders</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.total_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.total_trades">
<code class="descname">total_trades</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.total_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>deprecated</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.stock_position.StockPosition.value_percent">
<code class="descname">value_percent</code><a class="headerlink" href="#rqalpha.model.position.stock_position.StockPosition.value_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 获得该持仓的实时市场价值在总投资组合价值中所占比例，取值范围[0, 1]</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model.position.future_position">
<span id="futureposition"></span><h3>FuturePosition<a class="headerlink" href="#module-rqalpha.model.position.future_position" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.position.future_position.FuturePosition">
<em class="property">class </em><code class="descclassname">rqalpha.model.position.future_position.</code><code class="descname">FuturePosition</code><span class="sig-paren">(</span><em>order_book_id</em><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">rqalpha.model.position.base_position.BasePosition</span></code></p>
<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_avg_holding_price">
<code class="descname">buy_avg_holding_price</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_avg_holding_price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向持仓均价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_close_order_quantity">
<code class="descname">buy_close_order_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_close_order_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 买方向挂单量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_holding_pnl">
<code class="descname">buy_holding_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_holding_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向当日持仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_margin">
<code class="descname">buy_margin</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向持仓保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_old_quantity">
<code class="descname">buy_old_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_old_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 买方向昨仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_open_order_quantity">
<code class="descname">buy_open_order_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_open_order_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 买方向挂单量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_pnl">
<code class="descname">buy_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向累计盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_quantity">
<code class="descname">buy_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 买方向持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_realized_pnl">
<code class="descname">buy_realized_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_realized_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 买方向平仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.buy_today_quantity">
<code class="descname">buy_today_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.buy_today_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 买方向今仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.closable_buy_quantity">
<code class="descname">closable_buy_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.closable_buy_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 可平买方向持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.closable_sell_quantity">
<code class="descname">closable_sell_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.closable_sell_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 可平卖方向持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.daily_pnl">
<code class="descname">daily_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.daily_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.holding_pnl">
<code class="descname">holding_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.holding_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日持仓盈亏</p>
</dd></dl>

<dl class="method">
<dt id="rqalpha.model.position.future_position.FuturePosition.is_de_listed">
<code class="descname">is_de_listed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.is_de_listed" title="Permalink to this definition">¶</a></dt>
<dd><p>判断合约是否过期</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.margin">
<code class="descname">margin</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.pnl">
<code class="descname">pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 累计盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.realized_pnl">
<code class="descname">realized_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.realized_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 当日平仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_avg_holding_price">
<code class="descname">sell_avg_holding_price</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_avg_holding_price" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向持仓均价</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_close_order_quantity">
<code class="descname">sell_close_order_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_close_order_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 卖方向挂单量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_holding_pnl">
<code class="descname">sell_holding_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_holding_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向当日持仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_margin">
<code class="descname">sell_margin</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_margin" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向持仓保证金</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_old_quantity">
<code class="descname">sell_old_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_old_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 卖方向昨仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_open_order_quantity">
<code class="descname">sell_open_order_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_open_order_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 卖方向挂单量</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_pnl">
<code class="descname">sell_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向累计盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_quantity">
<code class="descname">sell_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 卖方向持仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_realized_pnl">
<code class="descname">sell_realized_pnl</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_realized_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>[float] 卖方向平仓盈亏</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.position.future_position.FuturePosition.sell_today_quantity">
<code class="descname">sell_today_quantity</code><a class="headerlink" href="#rqalpha.model.position.future_position.FuturePosition.sell_today_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>[int] 卖方向今仓</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rqalpha.model">
<span id="instrument"></span><h3>Instrument<a class="headerlink" href="#module-rqalpha.model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.Instrument">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">Instrument</code><a class="headerlink" href="#rqalpha.model.Instrument" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.Instrument.order_book_id">
<code class="descname">order_book_id</code><a class="headerlink" href="#rqalpha.model.Instrument.order_book_id" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】股票：证券代码，证券的独特的标识符。应以&#8217;.XSHG&#8217;或&#8217;.XSHE&#8217;结尾，前者代表上证，后者代表深证。期货：期货代码，期货的独特的标识符（郑商所期货合约数字部分进行了补齐。例如原有代码&#8217;ZC609&#8217;补齐之后变为&#8217;ZC1609&#8217;）。主力连续合约UnderlyingSymbol+88，例如&#8217;IF88&#8217; ；指数连续合约命名规则为UnderlyingSymbol+99</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#rqalpha.model.Instrument.symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】股票：证券的简称，例如&#8217;平安银行&#8217;。期货：期货的简称，例如&#8217;沪深1005&#8217;。</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.abbrev_symbol">
<code class="descname">abbrev_symbol</code><a class="headerlink" href="#rqalpha.model.Instrument.abbrev_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】证券的名称缩写，在中国A股就是股票的拼音缩写，例如：&#8217;PAYH&#8217;就是平安银行股票的证券名缩写；在期货市场中例如&#8217;HS1005&#8217;，主力连续合约与指数连续合约都为&#8217;null&#8217;。</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.round_lot">
<code class="descname">round_lot</code><a class="headerlink" href="#rqalpha.model.Instrument.round_lot" title="Permalink to this definition">¶</a></dt>
<dd><p>【int】股票：一手对应多少股，中国A股一手是100股。期货：一律为1。</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">sector_code（股票专用）</code></dt>
<dd><p>【str】板块缩写代码，全球通用标准定义</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">sector_code_name（股票专用）</code></dt>
<dd><p>【str】以当地语言为标准的板块代码名</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">industry_code（股票专用）</code></dt>
<dd><p>【str】国民经济行业分类代码，具体可参考下方“Industry列表”</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">industry_name（股票专用）</code></dt>
<dd><p>【str】国民经济行业分类名称</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.listed_date">
<code class="descname">listed_date</code><a class="headerlink" href="#rqalpha.model.Instrument.listed_date" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】股票：该证券上市日期。期货：期货的上市日期，主力连续合约与指数连续合约都为&#8216;0000-00-00&#8217;。</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.de_listed_date">
<code class="descname">de_listed_date</code><a class="headerlink" href="#rqalpha.model.Instrument.de_listed_date" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】股票：退市日期。期货：交割日期。</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.type">
<code class="descname">type</code><a class="headerlink" href="#rqalpha.model.Instrument.type" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】合约类型，目前支持的类型有: &#8216;CS&#8217;, &#8216;INDX&#8217;, &#8216;LOF&#8217;, &#8216;ETF&#8217;, &#8216;FenjiMu&#8217;, &#8216;FenjiA&#8217;, &#8216;FenjiB&#8217;, &#8216;Future&#8217;</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">concept_names（股票专用）</code></dt>
<dd><p>【str】概念股分类，例如：&#8217;铁路基建&#8217;，&#8217;基金重仓&#8217;等</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.Instrument.exchange">
<code class="descname">exchange</code><a class="headerlink" href="#rqalpha.model.Instrument.exchange" title="Permalink to this definition">¶</a></dt>
<dd><p>【str】交易所。股票：&#8217;XSHE&#8217; - 深交所, &#8216;XSHG&#8217; - 上交所。期货：&#8217;DCE&#8217; - 大连商品交易所, &#8216;SHFE&#8217; - 上海期货交易所，&#8217;CFFEX&#8217; - 中国金融期货交易所, &#8216;CZCE&#8217;- 郑州商品交易所</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">board_type（股票专用）</code></dt>
<dd><p>【str】板块类别，&#8217;MainBoard&#8217; - 主板,&#8217;GEM&#8217; - 创业板</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">status（股票专用）</code></dt>
<dd><p>【str】合约状态。&#8217;Active&#8217; - 正常上市, &#8216;Delisted&#8217; - 终止上市, &#8216;TemporarySuspended&#8217; - 暂停上市, &#8216;PreIPO&#8217; - 发行配售期间, &#8216;FailIPO&#8217; - 发行失败</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">special_type（股票专用）</code></dt>
<dd><p>【str】特别处理状态。&#8217;Normal&#8217; - 正常上市, &#8216;ST&#8217; - ST处理, &#8216;StarST&#8217; - *ST代表该股票正在接受退市警告, &#8216;PT&#8217; - 代表该股票连续3年收入为负，将被暂停交易, &#8216;Other&#8217; - 其他</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">contract_multiplier（期货专用）</code></dt>
<dd><p>【float】合约乘数，例如沪深300股指期货的乘数为300.0</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">underlying_order_book_id（期货专用）</code></dt>
<dd><p>【str】合约标的代码，目前除股指期货(IH, IF, IC)之外的期货合约，这一字段全部为&#8217;null&#8217;</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">underlying_symbol（期货专用）</code></dt>
<dd><p>【str】合约标的名称，例如IF1005的合约标的名称为&#8217;IF&#8217;</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">maturity_date（期货专用）</code></dt>
<dd><p>【str】期货到期日。主力连续合约与指数连续合约都为&#8216;0000-00-00&#8217;</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">settlement_method（期货专用）</code></dt>
<dd><p>【str】交割方式，&#8217;CashSettlementRequired&#8217; - 现金交割, &#8216;PhysicalSettlementRequired&#8217; - 实物交割</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">product（期货专用）</code></dt>
<dd><p>【str】产品类型，&#8217;Index&#8217; - 股指期货, &#8216;Commodity&#8217; - 商品期货, &#8216;Government&#8217; - 国债期货</p>
</dd></dl>

</dd></dl>

<p>Instrument对象也支持如下方法：</p>
<p>合约已上市天数：</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="n">order_book_id</span><span class="p">)</span><span class="o">.</span><span class="n">days_from_listed</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>如果合约首次上市交易，天数为0；如果合约尚未上市或已经退市，则天数值为-1</p>
<p>合约距离到期天数。:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="n">order_book_id</span><span class="p">)</span><span class="o">.</span><span class="n">days_to_expire</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>如果策略已经退市，则天数值为-1</p>
</div>
</div>
<div class="section" id="id7">
<h2>枚举常量<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="order-status">
<h3>ORDER_STATUS - 订单状态<a class="headerlink" href="#order-status" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.ORDER_STATUS">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">ORDER_STATUS</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.ORDER_STATUS.PENDING_NEW">
<code class="descname">PENDING_NEW</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS.PENDING_NEW" title="Permalink to this definition">¶</a></dt>
<dd><p>待报</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.ORDER_STATUS.ACTIVE">
<code class="descname">ACTIVE</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS.ACTIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>可撤</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.ORDER_STATUS.FILLED">
<code class="descname">FILLED</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS.FILLED" title="Permalink to this definition">¶</a></dt>
<dd><p>全成</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.ORDER_STATUS.CANCELLED">
<code class="descname">CANCELLED</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS.CANCELLED" title="Permalink to this definition">¶</a></dt>
<dd><p>已撤</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.ORDER_STATUS.REJECTED">
<code class="descname">REJECTED</code><a class="headerlink" href="#rqalpha.model.ORDER_STATUS.REJECTED" title="Permalink to this definition">¶</a></dt>
<dd><p>拒单</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="side">
<h3>SIDE - 买卖方向<a class="headerlink" href="#side" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.SIDE">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">SIDE</code><a class="headerlink" href="#rqalpha.model.SIDE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.SIDE.BUY">
<code class="descname">BUY</code><a class="headerlink" href="#rqalpha.model.SIDE.BUY" title="Permalink to this definition">¶</a></dt>
<dd><p>买</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.SIDE.SELL">
<code class="descname">SELL</code><a class="headerlink" href="#rqalpha.model.SIDE.SELL" title="Permalink to this definition">¶</a></dt>
<dd><p>卖</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="position-effect">
<h3>POSITION_EFFECT - 开平<a class="headerlink" href="#position-effect" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.POSITION_EFFECT">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">POSITION_EFFECT</code><a class="headerlink" href="#rqalpha.model.POSITION_EFFECT" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.POSITION_EFFECT.OPEN">
<code class="descname">OPEN</code><a class="headerlink" href="#rqalpha.model.POSITION_EFFECT.OPEN" title="Permalink to this definition">¶</a></dt>
<dd><p>开仓</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.POSITION_EFFECT.CLOSE">
<code class="descname">CLOSE</code><a class="headerlink" href="#rqalpha.model.POSITION_EFFECT.CLOSE" title="Permalink to this definition">¶</a></dt>
<dd><p>平仓</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="order-type">
<h3>ORDER_TYPE - 订单类型<a class="headerlink" href="#order-type" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.ORDER_TYPE">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">ORDER_TYPE</code><a class="headerlink" href="#rqalpha.model.ORDER_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.ORDER_TYPE.MARKET">
<code class="descname">MARKET</code><a class="headerlink" href="#rqalpha.model.ORDER_TYPE.MARKET" title="Permalink to this definition">¶</a></dt>
<dd><p>市价单</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.ORDER_TYPE.LIMIT">
<code class="descname">LIMIT</code><a class="headerlink" href="#rqalpha.model.ORDER_TYPE.LIMIT" title="Permalink to this definition">¶</a></dt>
<dd><p>限价单</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="run-type">
<h3>RUN_TYPE - 策略运行类型<a class="headerlink" href="#run-type" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.RUN_TYPE">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">RUN_TYPE</code><a class="headerlink" href="#rqalpha.model.RUN_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.RUN_TYPE.BACKTEST">
<code class="descname">BACKTEST</code><a class="headerlink" href="#rqalpha.model.RUN_TYPE.BACKTEST" title="Permalink to this definition">¶</a></dt>
<dd><p>回测</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.RUN_TYPE.PAPER_TRADING">
<code class="descname">PAPER_TRADING</code><a class="headerlink" href="#rqalpha.model.RUN_TYPE.PAPER_TRADING" title="Permalink to this definition">¶</a></dt>
<dd><p>实盘模拟</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="matching-type">
<h3>MATCHING_TYPE - 撮合方式<a class="headerlink" href="#matching-type" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="rqalpha.model.MATCHING_TYPE">
<em class="property">class </em><code class="descclassname">rqalpha.model.</code><code class="descname">MATCHING_TYPE</code><a class="headerlink" href="#rqalpha.model.MATCHING_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="rqalpha.model.MATCHING_TYPE.CURRENT_BAR_CLOSE">
<code class="descname">CURRENT_BAR_CLOSE</code><a class="headerlink" href="#rqalpha.model.MATCHING_TYPE.CURRENT_BAR_CLOSE" title="Permalink to this definition">¶</a></dt>
<dd><p>以当前bar收盘价撮合</p>
</dd></dl>

<dl class="attribute">
<dt id="rqalpha.model.MATCHING_TYPE.NEXT_BAR_OPEN">
<code class="descname">NEXT_BAR_OPEN</code><a class="headerlink" href="#rqalpha.model.MATCHING_TYPE.NEXT_BAR_OPEN" title="Permalink to this definition">¶</a></dt>
<dd><p>以下一bar数据开盘价撮合</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extend_api.html" class="btn btn-neutral float-right" title="扩展 API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config.html" class="btn btn-neutral" title="参数配置" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, RiceQuant.
      Last updated on Mar 27, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.0.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
    console.log("RQAlpha Powered By RiceQuant.");
</script>


</body>
</html>